---
title: å…«çš‡åå•é¡Œ- 8 Queens Puzzle
description: >-
  å…«çš‡åå•é¡Œå¯ä»¥èªªæ˜¯ä¸€é“ç›¸ç•¶ç¶“å…¸çš„æ¼”ç®—æ³•é¡Œç›®ï¼Œä»¥è¥¿æ´‹æ£‹ç‚ºèƒŒæ™¯ï¼Œå¦‚ä½•åœ¨ä¸€å€‹8x8çš„æ£‹ç›¤ä¸Šæ“ºæ”¾å…«å€‹çš‡åçš„æ£‹å­ï¼Œè®“ä»»ä½•ä¸€å€‹çš‡åç„¡æ³•åƒæ‰å…¶ä¸­ä¸€å€‹çš‡åï¼Œä¹Ÿæ˜¯å°±æ˜¯ä»»ä½•ä¸€å€‹çš‡åçš„æ©«è¡Œã€ç¸±è¡Œã€æ–œç·šä¸Šéƒ½ä¸æœƒå‡ºç¾å…¶å®ƒçš„çš‡åï¼Œå¾Œä¾†å…«çš‡åå•é¡Œä¹Ÿè¢«è¡ç”Ÿç‚ºNçš‡åå•é¡Œ
  â€”â€¦
date: "2021-12-27T05:35:43.910Z"
categories: Algorithm
keywords: []
tag:â€ŠAlgorithm
---

![](/img/1__Sc3JYk2kLI__T__j9fueGwtA.jpeg)

å…«çš‡åå•é¡Œå¯ä»¥èªªæ˜¯ä¸€é“ç›¸ç•¶ç¶“å…¸çš„æ¼”ç®—æ³•é¡Œç›®ï¼Œä»¥è¥¿æ´‹æ£‹ç‚ºèƒŒæ™¯ï¼Œå¦‚ä½•åœ¨ä¸€å€‹ 8x8 çš„æ£‹ç›¤ä¸Šæ“ºæ”¾å…«å€‹çš‡åçš„æ£‹å­ï¼Œè®“ä»»ä½•ä¸€å€‹çš‡åç„¡æ³•åƒæ‰å…¶ä¸­ä¸€å€‹çš‡åï¼Œä¹Ÿæ˜¯å°±æ˜¯ä»»ä½•ä¸€å€‹çš‡åçš„**æ©«è¡Œã€ç¸±è¡Œã€æ–œç·š**ä¸Šéƒ½ä¸æœƒå‡ºç¾å…¶å®ƒçš„çš‡åï¼Œå¾Œä¾†å…«çš‡åå•é¡Œä¹Ÿè¢«è¡ç”Ÿç‚º N çš‡åå•é¡Œ â€Šâ€”â€Š åœ¨ N\*N çš„æ£‹ç›¤ä¸Šæ”¾ç½® N å€‹çš‡åï¼Œè©¦å•æœ‰å¹¾ç¨®è§£æ³•?å°±è®“æˆ‘å€‘ç”¨å›æº¯æ³•ä¾†è§£ N çš‡åçš„å•é¡Œå§!

![](/img/1__GnLAe1gY0xGm71jQefBrSw.png)

å…ˆç”¨å››çš‡åä¾†æ¨æ¼”ä¸€ä¸‹æµç¨‹

1.  å‡è¨­ç¾åœ¨æœ‰å€‹ 4\*4 çš„æ£‹ç›¤ï¼Œæˆ‘å€‘å…ˆå°‡ç¬¬ä¸€å€‹çš‡åæ”¾åœ¨ç¬¬ä¸€å€‹æ ¼å­è£¡é¢

![](/img/1__AgLym8x5mpqmj2TzS8Xi7g.png)

2\. ç”±æ–¼ä¸€å€‹ç›´è¡Œåªèƒ½æœ‰ä¸€å€‹çš‡åï¼Œæ‰€ä»¥æ¥ä¸‹ä¾†å°‡ç¬¬äºŒå€‹çš‡åæ”¾åœ¨ç¬¬äºŒè¡Œçš„ç¬¬ä¸€å€‹ï¼Œä¸éå› ç‚ºçš‡åçš„æ©«åˆ—ä¸å¯ä»¥æœ‰å…¶å®ƒçš‡åï¼Œæ‰€ä»¥å¾€ä¸‹æŒªå‹•ä¸€æ ¼

![](/img/1__atCfuFhZonoM4Rr65mIEeA.png)

3\. çœŸä¸å·§ï¼Œæ–œç·šä¸Šä¹Ÿä¸èƒ½å‡ºç¾å…¶å®ƒçš‡åï¼Œå› æ­¤è¦å†å¾€ä¸‹æŒªå‹•ä¸€æ ¼

![](/img/1__EPX7mnGeYz9yeVFP6__x0aA.png)

4\. å› æ­¤ç¬¬äºŒå€‹çš‡åæ“ºæ”¾åœ¨é€™å€‹ä½ç½®

![](/img/1__wcHoKzWfYokHy__pX9AIsIw.png)

5\. æ¥ä¸‹ä¾†æ”¾ç½®ç¬¬ä¸‰å€‹çš‡åï¼Œä½†æœƒç™¼ç¾ä¸€å€‹å•é¡Œï¼Œä¸ç®¡æ”¾åœ¨å“ªå€‹ä½ç½®éƒ½ä¸è¡Œï¼Œå› æ¬¡è¦ä½¿ç”¨å›æº¯æ³•ä¾†èª¿æ•´ç¬¬äºŒå€‹çš‡åçš„ä½ç½®ï¼ŒæŠŠä»–å¾€ä¸‹ç§»å‹•ä¸€æ ¼

![](/img/1__I8jWvi67J3gYu6RxCsw47g.png)

6\. èª¿æ•´å®Œä¹‹å¾Œç¬¬ä¸‰å€‹çš‡åä¹Ÿæ”¾å¥½äº†

![](/img/1__6xn2raq0Uqyo__K31UPgdwQ.png)

7\. ä¸éåœ¨æ“ºæ”¾ç¬¬å››å€‹çš‡åçš„æ™‚å€™ï¼Œåˆç™¼ç”Ÿäº†ä¸€æ¨£çš„å•é¡Œï¼Œåªå¥½ç”¨å›æº¯æ³•å†æ¬¡å€’å›å»

![](/img/1__yBACdLL7ZxFc1KL2f2dnqw.png)

8\. é‡è¦†å…ˆå‰çš„æ­¥é©Ÿä¹‹å¾Œï¼Œç¸½ç®—èƒ½å¤ æˆåŠŸæ“ºæ”¾å››å€‹çš‡åäº†!

![](/img/1__PJtnnBprIOEkBCUd4W4eFQ.png)

ç”¨ js å¯¦ä½œ

```javascript
const NQueens = (n) => {
  let answer = 0;
  let arr = [];
  for (let i = 0; i < n; i++) {
    arr.push(Array.from({ length: n }).fill(null));
  }

  let i = 0; //ç¬¬å¹¾åˆ—(æ©«å‘)
  let j = 0; //ç¬¬å¹¾è¡Œ(ç›´å‘)
  let loop = true;
  while (loop) {
    console.log("i", i, "j", j);
    arr[i][j] = "Q";
    console.log("arr", arr);
    //æª¢æŸ¥æ©«è¡Œã€ç¸±è¡Œã€æ–œç·šæ˜¯å¦æœ‰å…¶å®ƒQçš„flag
    let checkQExist = false;
    let k = 0;
    while (k < i) {
      //ç¢ºèªç•¶å‰çš„Qä¸Šæ–¹æ˜¯å¦æœ‰å…¶å®ƒQçš„å­˜åœ¨
      if (arr[k][j] === "Q") {
        checkQExist = true;
      }
      k++;
    }
    k = 0;
    while (k < j) {
      //ç¢ºèªç•¶å‰çš„Qå·¦é‚Šæ˜¯å¦æœ‰å…¶å®ƒQçš„å­˜åœ¨
      if (arr[i][k] === "Q") {
        checkQExist = true;
      }
      k++;
    }
    k = 1;
    let l = -1;
    while (i + k < n && j + l >= 0) {
      //ç¢ºèªç•¶å‰çš„Qå°è§’ç·š(å·¦ä¸‹è§’)æ˜¯å¦æœ‰å…¶å®ƒQçš„å­˜åœ¨
      if (arr[i + k][j + l] === "Q") {
        checkQExist = true;
      }
      k++;
      l--;
    }
    k = -1;
    while (i + k >= 0 && j + k >= 0) {
      //ç¢ºèªç•¶å‰çš„Qå°è§’ç·š(å³ä¸Šè§’)æ˜¯å¦æœ‰å…¶å®ƒQçš„å­˜åœ¨
      if (arr[i + k][j + k] === "Q") {
        checkQExist = true;
      }
      k--;
    }
    if (!checkQExist) {
      console.log("Q can put here");
      console.log(arr);
      //å·²ç¶“æ”¾åˆ°æœ€å¾Œä¸€è¡Œäº†
      if (j === n - 1) {
        answer++;
        console.log("perfect solution");
        console.log(arr);
        arr[i][j] = null;
        i++; //å¾€ä¸‹ä¸€åˆ—
      } else {
        //å¾€ä¸‹ä¸€è¡Œ
        i = 0;
        j++;
      }
    }

    if (checkQExist) {
      console.log("Q exist!!");
      console.log(arr);
      arr[i][j] = null; //ä¸èƒ½æ”¾é€™æ ¼æ‰€ä»¥è¦æ¸…ç©º
      i++;
    }

    //æª¢æŸ¥æ˜¯å¦è¶…å‡ºé‚Šç•Œ
    const checkBoundary = () => {
      j--;
      for (let r = 0; r < arr.length; r++) {
        if (arr[r][j] === "Q") {
          arr[r][j] = null;
          console.log("r and j is", r, j);
          i = r + 1;
          break;
        }
      }
    };

    while (i >= n) {
      //å¦‚æœæ©«åˆ—è¶…én éœ€æª¢æŸ¥å‰ä¸€è¡Œ
      checkBoundary();
      if (j < 0) {
        console.log("done");
        loop = false;
        break;
      }
    }
  }
  console.log("Number of solution", answer);
};

NQueens(4); //2
```

å–®çœ‹ç¨‹å¼ç¢¼å¯¦åœ¨æ˜¯éæ–¼æŠ½è±¡ï¼Œç‚ºäº†å¹«åŠ©ç†è§£æ‰€ä»¥å°‡é™£åˆ—å°å‡ºä¾†çœ‹ï¼Œå°±æœƒæ¯”è¼ƒæ¸…æ¥šæ•´é«”çš„é‹ä½œæµç¨‹ç‚ºä½•

![](/img/1__yjrnZ8zk5apVOkJq1F__4RQ.png)

ç‚ºäº†é©—è­‰ç¨‹å¼ç¢¼æ˜¯å¦æ­£ç¢ºï¼Œå°‡ input æ”¹ç‚º 8ï¼Œçµæœé‹ç®—æ™‚é–“å‡ºä¹æˆ‘çš„æ„æ–™ï¼ŒçœŸçš„æ˜¯æ‰€è¬‚çš„è®“å­å½ˆé£›ä¸€æœƒï¼Œéå¸¸çš„è€—æ™‚ï¼Œä¸€åº¦é‚„è®“æˆ‘ä»¥ç‚ºæ˜¯å¦å¯«äº†ç„¡çª®è¿´åœˆ ğŸ˜‚ï¼Œé‚„å¥½æœ€å¾ŒæˆåŠŸå°å‡º 92

![](/img/1__noQbd7YxFJ7XewwWc__yuCQ.png)
