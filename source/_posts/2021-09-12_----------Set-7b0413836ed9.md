---
title: "[è³‡æ–™çµæ§‹]â€Šâ€”â€Š Set"
description: >-
  Setæ˜¯JavaScript
  ES6ä¸­æ–°å¢çš„è³‡æ–™çµæ§‹ï¼ŒSetèˆ‡é™£åˆ—å¾ˆé¡ä¼¼ï¼Œå…è¨±ä»»ä½•å‹æ…‹çš„å€¼ï¼Œè·Ÿé™£åˆ—ä¸åŒçš„æ˜¯æ‰€æœ‰çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œä¸å…è¨±æœ‰é‡è¤‡çš„å€¼ï¼Œå› æ­¤å¾ˆé©åˆç”¨ä¾†å»é™¤é‡è¤‡çš„å€¼ã€‚
date: "2021-09-12T08:33:50.503Z"
categories: Algorithm
tag:â€ŠAlgorithm
keywords: []
---

![](/img/1__pF0dKkVIaDZ2XcepTSCMNg.jpeg)

Set æ˜¯ JavaScript ES6 ä¸­æ–°å¢çš„è³‡æ–™çµæ§‹ï¼ŒSet èˆ‡é™£åˆ—å¾ˆé¡ä¼¼ï¼Œå…è¨±ä»»ä½•å‹æ…‹çš„å€¼ï¼Œè·Ÿé™£åˆ—ä¸åŒçš„æ˜¯æ‰€æœ‰çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œä¸å…è¨±æœ‰é‡è¤‡çš„å€¼ï¼Œå› æ­¤å¾ˆé©åˆç”¨ä¾†å»é™¤é‡è¤‡çš„å€¼ã€‚

#### å®£å‘Šä¸€å€‹æ–° Set

```javascript
let set = new Set();
let set2 = new Set([1, 3, 5, 7]); //{1, 3, 5, 7}
```

#### Set.add(value)

æ–°å¢ value

```javascript
set.add(1); // {1}
```

> é€™é‚Šè¦ç‰¹åˆ¥æ³¨æ„ï¼Œå› ç‚º set ä¸å…è¨±æœ‰é‡è¤‡çš„å€¼ ï¼Œæ‰€ä»¥é‡è¤‡ add åŒå€‹å…ƒç´ æ˜¯ä¸æœƒæœ‰æ•ˆæœçš„

```javascript
set.add(1); // {1}
set.add(1); // {1} ä¾ç„¶åªæœ‰ä¸€å€‹ 1
```

å› ç‚º add æœƒå›å‚³ set çš„æœ¬èº«ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ chaining(éˆ)çš„å¯«æ³•

```javascript
set.add(1).add(2).add(3);
```

#### Set.has(value)

ç¢ºèª Set æ˜¯å¦æœ‰è©²å€¼ï¼Œå›å‚³ boolean å€¼

```javascript
set.has(1); // return true
```

#### Set.delete(value)

åˆªé™¤è©² valueï¼Œå¦‚æœåˆªé™¤æˆåŠŸæœƒå›å‚³ trueï¼Œå¤±æ•—å‰‡æ˜¯ false

```javascript
set.delete(1); // return true
```

#### Set.size

å›å‚³ set çš„é•·åº¦

```javascript
let set = new Set();
set.add(1);
set.add(2);
set.add(3);

set.size; //3
```

#### Set.clear()

æ¸…é™¤ set æ‰€æœ‰çš„å…§å®¹ï¼Œä¸æœƒå›å‚³å€¼

```javascript
set.clear();
```

#### Set Iteration (è¿­ä»£)

- Set.keys():ç”±æ–¼ set æ²’æœ‰ keyï¼Œæ‰€ä»¥æœƒå›å‚³æ‰€æœ‰çš„ value
- Set.values():å›å‚³ set æ‰€æœ‰çš„ value
- Set.entires():å›å‚³æ¯å€‹å…ƒç´ \[key, value\]éµå€¼å°çš„å…§å®¹ï¼Œä½†å› ç‚º set æ²’æœ‰ keyï¼Œæ‰€ä»¥æœƒå›å‚³\[value, value\]
- Set.forEach((value, key)=>{}):éæ­· set

```javascript
let set = new Set([1, 3, 5]);

set.keys(); // {1, 3, 5}
set.values(); // {1, 3, 5}
set.entires(); // {1 => 1, 3 => 3, 5 => 5}
set.forEach((value, key) => {
  console.log("value:", value, "key:", key);
});
```

![](/img/1__X__i9CSYnt0hNesIHBm__5KA.png)

å°‡ Set è½‰æ›æˆ ğŸ‘‰Array

```javascript
let array = \[...set\]
```

å°‡ Array è½‰æ›æˆ ğŸ‘‰Set

```javascript
let set = new Set(array);
```

æ‰€ä»¥è—‰ç”± Set å€¼ä¸é‡è¤‡çš„ç‰¹æ€§ï¼Œå¦‚æœæƒ³å»é™¤é‡è¤‡çš„å€¼å¯ä»¥é€™éº¼åš

```javascript
let arr = [1, 2, 2, 3, 1];
let set = new Set(arr); // {1, 2, 2, 3, 1}
let result = [...set]; // [1, 2, 3]
```

æˆ–è€…æƒ³æ‰¾å‡ºå…©å€‹é™£åˆ—çš„è¯é›†

```javascript
let arr1 = [1, 2, 5, 7, 9];
let arr2 = [1, 3, 4, 7, 8];
let same = new Set([...arr1, ...arr2]);
// {1, 2, 5, 7, 9, 3, 4, 8}
```

### WeakSet

WeakSet çµæ§‹é¡ä¼¼æ–¼ Setï¼Œä½†è·Ÿ Set ä¸åŒçš„æ˜¯ï¼Œä¸æ¥å—åŸºæœ¬è³‡æ–™å‹æ…‹çš„å€¼ï¼Œåªæ¥å— Objectï¼Œæ²’æœ‰éæ­·å’Œ size çš„æ–¹æ³•ï¼Œåªæœ‰ addã€hasã€delete é€™ä¸‰å€‹æ–¹æ³•å¯ä»¥ä½¿ç”¨ï¼Œå¦å¤–ï¼ŒWeakSet è£¡é¢çš„ç‰©ä»¶æ˜¯ Weakly Referenceã€‚

**ç”šéº¼æ˜¯ Weakly Reference?**

> ä¸­æ–‡ç¿»ä½œå¼±å¼•ç”¨ï¼Œä¸æœƒè¢«åƒåœ¾å›æ”¶æ©Ÿåˆ¶è¨ˆå…¥åƒè€ƒï¼Œä¹Ÿå°±æ˜¯èªªç•¶å…¶å®ƒç‰©ä»¶ä¸å†åƒè€ƒè©²ç‰©ä»¶ï¼Œå°±æœƒè¢« js çš„åƒåœ¾å›æ”¶æ©Ÿåˆ¶å›æ”¶æ‰é‡‹æ”¾è¨˜æ†¶é«”ï¼Œå³ä½¿ç‰©ä»¶é‚„åœ¨ WeakSet è£¡é¢ï¼Œå¯ä»¥å¿…å… memery leak(è¨˜æ†¶é«”æ´©æ¼)çš„å•é¡Œã€‚

```javascript
let weakSet = new WeakSet();
weakSet.add({});
weakSet.add([]);
//{[], {}}
weakSet.add(5);
// TypeError: Invalid value used in weak set
```

åƒè€ƒè³‡æ–™: [Set å’Œ Map æ•°æ®ç»“æ„](https://es6.ruanyifeng.com/#docs/set-map)
