<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"codinghotpot.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.18.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"style":null,"show_result":false},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"prism":false,"i18n":{"placeholder":"搜尋...","empty":"我們無法找到任何有關 ${query} 的搜索結果","hits_time":"${hits} 找到 ${time} 個結果","hits":"找到 ${hits} 個結果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="或許你曾經有過這樣的經驗，專案採用webpack開發，一開始bundle的速度還算快，但時間一久，隨著專案的增長，套件的相依關係變得越來越冗長，能明顯感受到webpack…">
<meta property="og:type" content="article">
<meta property="og:title" content="快如閃電的vite">
<meta property="og:url" content="https://codinghotpot.com/posts/8b08edc3/index.html">
<meta property="og:site_name" content="Coding Hot Pot">
<meta property="og:description" content="或許你曾經有過這樣的經驗，專案採用webpack開發，一開始bundle的速度還算快，但時間一久，隨著專案的增長，套件的相依關係變得越來越冗長，能明顯感受到webpack…">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__H21jmBDu0AmjMUR1Swy7rw.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__2y__b5__CN8dZZVa3oMJ5zOg.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__mv__MhxHr__NPTzHJpxXztUg.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__icUCnOykhvRdBcVLSY9ABQ.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__kWpt9qxZcuBZShvkxf__zHA.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__JS3gFsv2vIsHOFMRhrWRZg.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__hmc0__Gy2yTBBirwLmXmX3w.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__7KCfGNPbHLJkSs8yBnjykQ.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__3lLM4JonF0tdRxrwuHqohg.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__FBP4__a0IamxH4fVKAugbnA.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__ynFGtdssHGC69bBCxDmscQ.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__C0qkUMCcGSGH1T9ZupE7ew.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__Yfc1u7brsKAI5__qvN72h8g.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__nrCerQOQAerHSYWUDB9YpA.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__hEvXjvqA2xsKlVK5bs7Z7A.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__Jc6sL8C0e4ixDe6TNsgnCg.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__9tote5BLRgUT__SsI6QSQ8A.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__8ueAvaW6ZR4xKXClZ6UX9Q.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__xXy5uR6__JGx7buryBkTwAw.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1____dppngxWou1Fk93ctfvGPA.png">
<meta property="og:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__dusVhPiL44VDoS4gJHMWSg.gif">
<meta property="article:published_time" content="2022-02-02T08:02:49.079Z">
<meta property="article:modified_time" content="2024-07-15T06:40:55.961Z">
<meta property="article:author" content="Joe Chang">
<meta property="article:tag" content="bundler vite">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://codinghotpot.com/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__H21jmBDu0AmjMUR1Swy7rw.png">


<link rel="canonical" href="https://codinghotpot.com/posts/8b08edc3/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-TW","comments":true,"permalink":"https://codinghotpot.com/posts/8b08edc3/","path":"posts/8b08edc3/","title":"快如閃電的vite"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>快如閃電的vite | Coding Hot Pot</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SJM3X3RGKD"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-SJM3X3RGKD","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Coding Hot Pot</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">日新月異的前端技術...學不動了</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜尋" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>關於</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>標籤</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分類</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>歸檔</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%8A%E5%BF%AB%E7%9C%9F%E7%9A%84%E5%BE%88%E6%9C%89%E6%84%9F"><span class="nav-number">1.</span> <span class="nav-text">變快真的很有感?</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%97%9C%E6%96%BC-vite-%E6%89%93%E5%8C%85"><span class="nav-number">2.</span> <span class="nav-text">關於 vite 打包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#vite-%E8%B5%B7%E4%BE%86"><span class="nav-number">3.</span> <span class="nav-text">vite 起來!</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%B3%E6%A7%BD-vite-%E4%B9%8B%E5%89%8D%E6%9C%89%E5%93%AA%E4%BA%9B%E9%A1%A7%E6%85%AE"><span class="nav-number">4.</span> <span class="nav-text">跳槽 vite 之前有哪些顧慮?</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BE%9E-webpack-%E8%B7%B3%E9%81%8E%E4%BE%86-vite-%E8%A6%81%E7%BF%92%E6%85%A3%E7%94%9A%E9%BA%BC"><span class="nav-number">5.</span> <span class="nav-text">從 webpack 跳過來 vite 要習慣甚麼?</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B5%90%E8%AB%96"><span class="nav-number">6.</span> <span class="nav-text">結論</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Joe Chang"
      src="/images/oldman.jpg">
  <p class="site-author-name" itemprop="name">Joe Chang</p>
  <div class="site-description" itemprop="description">唯有非常努力，才能看起來毫不費力</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">120</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">49</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://codinghotpot.com/posts/8b08edc3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/oldman.jpg">
      <meta itemprop="name" content="Joe Chang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Hot Pot">
      <meta itemprop="description" content="唯有非常努力，才能看起來毫不費力">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="快如閃電的vite | Coding Hot Pot">
      <meta itemprop="description" content="或許你曾經有過這樣的經驗，專案採用webpack開發，一開始bundle的速度還算快，但時間一久，隨著專案的增長，套件的相依關係變得越來越冗長，能明顯感受到webpack…">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          快如閃電的vite
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2022-02-02 08:02:49" itemprop="dateCreated datePublished" datetime="2022-02-02T08:02:49+00:00">2022-02-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新於</span>
      <time title="修改時間：2024-07-15 06:40:55" itemprop="dateModified" datetime="2024-07-15T06:40:55+00:00">2024-07-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/bundler/" itemprop="url" rel="index"><span itemprop="name">bundler</span></a>
        </span>
    </span>

  
</div>

            <div class="post-description">或許你曾經有過這樣的經驗，專案採用webpack開發，一開始bundle的速度還算快，但時間一久，隨著專案的增長，套件的相依關係變得越來越冗長，能明顯感受到webpack…</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__H21jmBDu0AmjMUR1Swy7rw.png"></p>
<p>或許你曾經有過這樣的經驗，專案採用 webpack 開發，一開始 bundle 的速度還算快，但時間一久，隨著專案的增長，套件的相依關係變得越來越冗長，能明顯感受到 webpack bundle 速度越來越緩慢，改了一個小地方卻要等上好幾秒才能看到網頁畫面更新，而 vite 就是為了解決這個問題而誕生的! vite 採用 ES Module 的方式，不需要提前做 bundle，讓瀏覽器發出 request 來跟 dev server 請求需要的 module，因此即使 dependency(第三方套件)變多，vite 的熱更新也不會有延遲的問題，啟動的速度也是輾壓 webpack</p>
<p><strong>甚麼是 bundle?</strong></p>
<blockquote>
<p>將專案中所有的 module(模組)編譯成一隻 JavaScript 檔案</p>
</blockquote>
<p>webpack 必須將全部有相依關係的 module 先處理過一次，bundle 好之後再由瀏覽器載入 js，如下圖的 main.js，因此要等上一段時間才能看到畫面更新</p>
<p><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__2y__b5__CN8dZZVa3oMJ5zOg.png"><br><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__mv__MhxHr__NPTzHJpxXztUg.png"></p>
<p>而 vite 是利用 ES Module 來載入套件，所以會有很多 request 依序加載，也就是把載入 module 的工作丟給瀏覽器來處理</p>
<p><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__icUCnOykhvRdBcVLSY9ABQ.png"><br><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__kWpt9qxZcuBZShvkxf__zHA.png"></p>
<p>除了 ES Module，esbuild 也是讓 vite 提升速度的一大功臣，esbuild 會將第三方套件預先構建好（Dependency Pre-Bundling），將 Dependency 整合在同一個 module，減少網路的 request，另外，vite dev server 會將所有的 module 視作 ES module，因此套件格式為 CommonJS 或是 UMD 的，esbuild 會統一轉成 ES Modules 的格式</p>
<p><strong>為甚麼可以這麼快?</strong></p>
<blockquote>
<p>Vite 将会使用 <a target="_blank" rel="noopener" href="https://esbuild.github.io/">esbuild</a> <a target="_blank" rel="noopener" href="https://cn.vitejs.dev/guide/dep-pre-bundling.html">预构建依赖</a>。 <a target="_blank" rel="noopener" href="https://esbuild.github.io/">esbuild</a> 使用 <strong>Go</strong> 编写，并且比以 JavaScript 编写的打包器预构建依赖快 10–100 倍。(引用自 vite 官網)</p>
</blockquote>
<p>看看 esbuild 這鬼神一般的速度…</p>
<p><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__JS3gFsv2vIsHOFMRhrWRZg.png"></p>
<h4 id="變快真的很有感"><a href="#變快真的很有感" class="headerlink" title="變快真的很有感?"></a>變快真的很有感?</h4><p>以一個全新的專案來說，採用的前端框架如果為 vue 的感受比較細微，使用 vue cli(webpack)和 vite 所建立的專案，兩者跑 dev server 的速度差異不大，但 React 就很有感了，以近期開發的 React 專案來說，剛開始是用 create-React-app (webpack)建立的，光一個空白專案的 bundle 速度就非常慢，最後慢到大家都受不了，因此決定改用 vite，雖然那時也是左思右想，擔心 vite 還不夠穩定，不過想說剛出的 vite 2.0 版本，有做大幅度的優化，就大膽的用在工作上的專案了(很小很小的專案)，習慣 vite 之後，再回去使用 webpack 會很不習慣那個速度 😂，這裡有個比較速度的<a target="_blank" rel="noopener" href="https://twitter.com/swyx/status/1290410811802804226">影片</a>我覺得很有趣，分享給大家</p>
<h4 id="關於-vite-打包"><a href="#關於-vite-打包" class="headerlink" title="關於 vite 打包"></a>關於 vite 打包</h4><p>vite 採用 rollup 進行打包，不過這邊的行為模式就跟 webpack 相差無幾了，為甚麼 vite 還是需要經過打包，不能像開發模式那樣靠瀏覽器載入需要的模組呢?</p>
<ol>
<li>因為發佈的程式碼是放在伺服器上，每個使用者打開網頁都會發出好幾個請求，伺服器的負擔會大大增加，這肯定行不通</li>
<li>上線版本還是需要對程式碼做一些優化處理，例如 lazy load、tree-shaking 等等</li>
</ol>
<h4 id="vite-起來"><a href="#vite-起來" class="headerlink" title="vite 起來!"></a>vite 起來!</h4><p>接下來實際來體驗 vite 有多快吧!要注意的是，vite 需要的 node 版本必須<strong>大於 12.0.0</strong>，如果版本太低要先記得升級，因為我習慣用 yarn，所以使用 yarn 來安裝 vite ，也可以用 npm 或是 pnpm 安裝</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn create vite</span><br></pre></td></tr></table></figure>

<p>執行完上述指令，就會詢問專案名稱以及要使用的框架為何，vite 不只支援 vue，react、svelte 等等的前端框架都可以，可說是海納百川 😂，這邊先選擇 React</p>
<p><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__hmc0__Gy2yTBBirwLmXmX3w.png"><br><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__7KCfGNPbHLJkSs8yBnjykQ.png"></p>
<p>選好框架後，會詢問是否要建立 typeScript 版本，這裡先選擇一般版本，選好版本後專案以迅雷不及掩耳的速度建立完成</p>
<p><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__3lLM4JonF0tdRxrwuHqohg.png"></p>
<p>執行 yarn dev 會發現 dev server 馬上就起好了，修改檔案也是一存檔，就跟著熱更新(HMR)</p>
<blockquote>
<p>假設有 a, b, c 三個模組，只有 c 模組更新，那麼只會重新編譯 c，a 和 b 直接從快取拿編譯結果，就不需要全部的模組都重新編譯，這就是為甚麼 vite 的熱更新並不會因為套件變多而變慢</p>
</blockquote>
<p>專案建好之後，可以在根目錄底下看到 vite.config.js</p>
<p><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__FBP4__a0IamxH4fVKAugbnA.png"></p>
<p>我們可以在 vite.config.js 撰寫打包相關設定</p>
<p><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__ynFGtdssHGC69bBCxDmscQ.png"></p>
<p>接下來會介紹個人常使用到的 vite 設定</p>
<p><strong>plugins</strong></p>
<p>要引入的套件 import 完之後，必須寫在 plugins 的陣列裡</p>
<p><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__C0qkUMCcGSGH1T9ZupE7ew.png"></p>
<p><strong>讀取 env 的變數</strong></p>
<p>在 webpack 中，我們只要寫上 process.env.xxx 就能取到我們要的環境變數，但是在 vite.config.js 中，這樣寫是取不到值的，必須額外引入 loadEnv 這個套件，export default 改為一個 return defineConfig 的函式，並且傳入 mode 參數</p>
<p><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__Yfc1u7brsKAI5__qvN72h8g.png"></p>
<p><strong>設置別名</strong></p>
<p><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__nrCerQOQAerHSYWUDB9YpA.png"></p>
<p><strong>dev server 相關設定</strong></p>
<p>假設 port 不想用預設的 3000，則可以設定成其他的 port</p>
<p><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__hEvXjvqA2xsKlVK5bs7Z7A.png"></p>
<p><strong>複製檔案並且移動到指定位置</strong></p>
<p>將檔案複製到指定資料夾並且更換檔名，設定 hook 可以更改複製的時機</p>
<p><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__Jc6sL8C0e4ixDe6TNsgnCg.png"></p>
<p><strong>全域引入 scss 變數</strong></p>
<p>可以全域引入多個 scss，這樣就不需要每個檔案都引入 scss 變數了</p>
<p><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__9tote5BLRgUT__SsI6QSQ8A.png"></p>
<p><strong>打包時檔案分類</strong></p>
<p>vite 打包的時候 js、 css、素材都會在同一個資料夾底下，雖然不影響功能運作，但是看起來不夠清爽，假設要像之前 webpack 打包那樣將檔案依類型分類就可以這樣設定</p>
<p><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__8ueAvaW6ZR4xKXClZ6UX9Q.png"></p>
<p><strong>套件大小分析工具(rollup-plugin-visualizer)</strong></p>
<p>專案上線後發現網頁載入速度過慢，就需要幫 js 瘦身，因此需要工具來幫我們分析套件的大小，每次打包會生成 stats.html，打開 stats.html，哪個套件最肥一目了然</p>
<p><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__xXy5uR6__JGx7buryBkTwAw.png"><br><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1____dppngxWou1Fk93ctfvGPA.png"></p>
<p>不過說實話我個人還是比較喜歡 webpack 的套件分析工具就是了 😂</p>
<p><img src="/Users/joectchang_mac/Downloads/medium-export-a/post2022/md_1697073583233/img/1__dusVhPiL44VDoS4gJHMWSg.gif"></p>
<h4 id="跳槽-vite-之前有哪些顧慮"><a href="#跳槽-vite-之前有哪些顧慮" class="headerlink" title="跳槽 vite 之前有哪些顧慮?"></a>跳槽 vite 之前有哪些顧慮?</h4><ol>
<li><strong>支援度</strong> —  舊瀏覽器的支援度一直都是都是讓人頭疼的問題，那些不支援 ES Modules 的瀏覽器該怎麼辦呢  ? 可以透過 <a href="https://link.juejin.cn/?target=https://link.zhihu.com/?target=https%253A//github.com/vitejs/vite/tree/main/packages/plugin-legacy" title="https://link.zhihu.com/?target=https%3A//github.com/vitejs/vite/tree/main/packages/plugin-legacy">@vitejs&#x2F;plugin-legacy</a> 套件來處理相容性的問題，不過為了因為多了向下相容的程式碼，所以打包出來的檔案會變蠻大的</li>
<li><strong>套件的豐富度</strong> — vite 可以相容 rollup 現有的套件，雖然數量不如 webpack 那麼多，不過也是綽綽有餘了</li>
<li><strong>穩定度</strong> —我想這應該是所有人對 vite 最有疑慮的一點了，不得不說 vite 目前還是有蠻多 bug 的，我用 vite 開發的時候的確也遇到不少問題，所以如果要用在工作的專案的話，必須在開發效率和穩定度之間做出取捨</li>
</ol>
<h4 id="從-webpack-跳過來-vite-要習慣甚麼"><a href="#從-webpack-跳過來-vite-要習慣甚麼" class="headerlink" title="從 webpack 跳過來 vite 要習慣甚麼?"></a>從 webpack 跳過來 vite 要習慣甚麼?</h4><p>假設要在 env 檔裡面設置環境變數，記得變數名稱要是 VITE(大寫)開頭，不然就會被忽略 ex. <code>VITE_APP_HOST</code>，以 vue cli 來說，假如要在.vue 檔或是.js 檔中讀取環境變數會是用 <code>process.env.VUE_APP_HOST</code>，而在 vite 裡面就會變成 <code>import.meta.env.VITE_APP_HOST</code></p>
<h4 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h4><p>在這個分秒必爭的時代，vite 有效的提升了開發的效率，不是一點點，而是非常有感的提升，也難怪 vite 的 slogan 會寫著 <strong>Next Generation Fronted Tooling</strong>，如果你從未用過 vite，非常推薦你玩看看，至於要不要用在工作的專案上，大部分的人還是持保留態度，畢竟 vite 還很年輕，穩定度一定不比行之有年的 webpack，究竟 vite 能否會取代 webpack 成為下個世代的前端開發工具呢  ? 這部分就留給時間去做驗證了</p>
<p>參考資料</p>
<p><a target="_blank" rel="noopener" href="https://vitejs.dev/">Vite 官網</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.huli.tw/2020/08/07/vite-and-esmodules/">Vite 怎麼能那麼快？從 ES modules 開始談起</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/bundler-vite/" rel="tag"># bundler vite</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/posts/c96fda09/" rel="prev" title="你的this不是你的this — 關於JavaScript的this指向">
                  <i class="fa fa-angle-left"></i> 你的this不是你的this — 關於JavaScript的this指向
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/posts/2eff145d/" rel="next" title="優雅的JavaScript Promise">
                  優雅的JavaScript Promise <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  
  <div class="comments">
  <script src="https://utteranc.es/client.js" repo="ChangChiao/ChangChiao.github.io" issue-term="pathname" theme="github-dark" crossorigin="anonymous" async></script>
  </div>
  
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Joe Chang</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 強力驅動
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="回到頂端">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/ChangChiao" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
